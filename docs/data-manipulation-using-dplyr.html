<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Data manipulation using dplyr | Exploratory data analysis for cancer biologists</title>
  <meta name="description" content="This workshop the second workshop designed for the Cancer MSc Students in UCL Cancer Institute to gain some confidence on using R (statistical-) programming language in their MSc projects." />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Data manipulation using dplyr | Exploratory data analysis for cancer biologists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This workshop the second workshop designed for the Cancer MSc Students in UCL Cancer Institute to gain some confidence on using R (statistical-) programming language in their MSc projects." />
  <meta name="github-repo" content="AMMHasan/Exploratory_data_analysis_for_cancer_biologists" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Data manipulation using dplyr | Exploratory data analysis for cancer biologists" />
  
  <meta name="twitter:description" content="This workshop the second workshop designed for the Cancer MSc Students in UCL Cancer Institute to gain some confidence on using R (statistical-) programming language in their MSc projects." />
  

<meta name="author" content="A M Mahedi Hasan" />


<meta name="date" content="2023-04-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="preface.html"/>
<link rel="next" href="plotting-using-ggplot2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SHORT TITLE HERE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html"><i class="fa fa-check"></i>Data manipulation using <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="0.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#install"><i class="fa fa-check"></i><b>0.1</b> Install</a></li>
<li class="chapter" data-level="0.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#pipe-operator"><i class="fa fa-check"></i><b>0.2</b> Pipe operator %&gt;%</a></li>
<li class="chapter" data-level="0.3" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#dplyr-verbs"><i class="fa fa-check"></i><b>0.3</b> dplyr verbs</a>
<ul>
<li class="chapter" data-level="0.3.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#select"><i class="fa fa-check"></i><b>0.3.1</b> select()</a></li>
<li class="chapter" data-level="0.3.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#filter"><i class="fa fa-check"></i><b>0.3.2</b> filter()</a></li>
<li class="chapter" data-level="0.3.3" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#mutate"><i class="fa fa-check"></i><b>0.3.3</b> mutate()</a></li>
<li class="chapter" data-level="0.3.4" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#rename"><i class="fa fa-check"></i><b>0.3.4</b> rename()</a></li>
<li class="chapter" data-level="0.3.5" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#arrange"><i class="fa fa-check"></i><b>0.3.5</b> arrange()</a></li>
<li class="chapter" data-level="0.3.6" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#distinct"><i class="fa fa-check"></i><b>0.3.6</b> distinct()</a></li>
<li class="chapter" data-level="0.3.7" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#slice"><i class="fa fa-check"></i><b>0.3.7</b> slice()</a></li>
<li class="chapter" data-level="0.3.8" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#join"><i class="fa fa-check"></i><b>0.3.8</b> join</a></li>
<li class="chapter" data-level="0.3.9" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#group_by-and-summarise"><i class="fa fa-check"></i><b>0.3.9</b> group_by() and summarise()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="plotting-using-ggplot2.html"><a href="plotting-using-ggplot2.html"><i class="fa fa-check"></i>Plotting using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="0.4" data-path="plotting-using-ggplot2.html"><a href="plotting-using-ggplot2.html#mini-intro-to-ggplot2"><i class="fa fa-check"></i><b>0.4</b> Mini intro to <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="0.4.1" data-path="plotting-using-ggplot2.html"><a href="plotting-using-ggplot2.html#installation"><i class="fa fa-check"></i><b>0.4.1</b> Installation</a></li>
<li class="chapter" data-level="0.4.2" data-path="plotting-using-ggplot2.html"><a href="plotting-using-ggplot2.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>0.4.2</b> Plotting with ggplot2</a></li>
<li class="chapter" data-level="0.4.3" data-path="plotting-using-ggplot2.html"><a href="plotting-using-ggplot2.html#the-rest-of-the-exercise-is-a-copy-of-the-top-50-ggplot2-visualizations---the-master-list-with-full-r-code."><i class="fa fa-check"></i><b>0.4.3</b> The rest of the exercise is a copy of the “Top 50 ggplot2 Visualizations - The Master List (With Full R Code)”.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="metabric-data-analysis.html"><a href="metabric-data-analysis.html"><i class="fa fa-check"></i>Metabric data analysis</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploratory data analysis for cancer biologists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation-using-dplyr" class="section level1 unnumbered hasAnchor">
<h1>Data manipulation using <code>dplyr</code><a href="data-manipulation-using-dplyr.html#data-manipulation-using-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Trust me, this is the part of my research where I spend a significant portion of my time. Real-life data are not polished and nicely annotated. Moreover, when you want to integrate data from different sources, the fun begins (I am showing the quotation finger. of course)! Even you need to format the output from one process and make it worthy for the next one. So, there’s no escape from data formatting / manipulating in real-life.</p>
<p>Here, we will be using the <code>dplyr</code> package which is one of the most powerful and popular packages in <strong>R</strong>. The <code>d</code> here represents data and <code>plyr</code> is supposed to be the tool plier (ref). Therefore, <code>dplyr</code> packages refers to a tool to manipulate data frame. <code>dplyr</code> provides a grammar of data manipulation and the functions it provides are regarded as the verbs in the code and are very efficient in solving most common data manipulation problems. It is sometimes arguably more efficient than the base <strong>R</strong> operations.</p>
<div id="install" class="section level2 hasAnchor" number="0.1">
<h2><span class="header-section-number">0.1</span> Install<a href="data-manipulation-using-dplyr.html#install" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are mainly two ways to install <code>dplyr</code> package in <strong>R</strong>. You can install the <code>tidyverse</code> package and <code>dplyr</code>, being a part of it, will automatically be installed in your <strong>R</strong> environment.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-manipulation-using-dplyr.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb1-2"><a href="data-manipulation-using-dplyr.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.1     ✔ readr     2.1.4
## ✔ forcats   1.0.0     ✔ stringr   1.5.0
## ✔ ggplot2   3.4.1     ✔ tibble    3.2.1
## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
## ✔ purrr     1.0.1     
## ── Conflicts ────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<p>Or, you can install just the <code>dplyr</code> package by -</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-manipulation-using-dplyr.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;dplyr&quot;)</span></span>
<span id="cb3-2"><a href="data-manipulation-using-dplyr.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>However, if you want to install the development version, which I won’t recommend, you can follow the codes below -</p>
</div>
<div id="pipe-operator" class="section level2 hasAnchor" number="0.2">
<h2><span class="header-section-number">0.2</span> Pipe operator %&gt;%<a href="data-manipulation-using-dplyr.html#pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It will be a crime not to introduce the pipe operator <code>%&gt;%</code> to you before starting with <code>dplyr</code> verbs. If you are familiar with the pipe operator <code>|</code> in bash scripting, that’s it. I have no better way to describe it to you. But, if you are not, then here is the thing for you -</p>
<p>The pipe operator <code>%&gt;%</code> connects two operations on the same data (be it a vector or a data frame). It passes the output from the left-hand side operation of the pipe operator as the first argument to the right-hand side operation of the operator. If you want an informal definition -
<code>x %&gt;% f(y)</code> is converted into <code>f(x,y)</code> by using the pipe operator. Let’s look at another example. If we have a vector x that holds value from 1 to 100 and we want to calculate the mean of x and make it round to an integer, we write in base <strong>R</strong> -</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-manipulation-using-dplyr.html#cb4-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb4-2"><a href="data-manipulation-using-dplyr.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(x))</span></code></pre></div>
<pre><code>## [1] 50</code></pre>
<p>However, using the pipe operator, we can first define the x and then calculate the mean and, at the end, round it to an integer, like -</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-manipulation-using-dplyr.html#cb6-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb6-2"><a href="data-manipulation-using-dplyr.html#cb6-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> mean <span class="sc">%&gt;%</span> round</span></code></pre></div>
<pre><code>## [1] 50</code></pre>
<p>It goes from left to right as we think and build our data analysis pipeline. The new version of <code>dplyr</code> also supports <code>|&gt;</code> as the pipe operator, but I will stick to <code>%&gt;%</code> in the workshop.</p>
</div>
<div id="dplyr-verbs" class="section level2 hasAnchor" number="0.3">
<h2><span class="header-section-number">0.3</span> dplyr verbs<a href="data-manipulation-using-dplyr.html#dplyr-verbs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are many verbs embedded in the dplyr package, here I will be discussing a few, but very important ones, that you will need to resolve most of the data manipulation challenges in your day-to-day life.</p>
<div id="select" class="section level3 hasAnchor" number="0.3.1">
<h3><span class="header-section-number">0.3.1</span> select()<a href="data-manipulation-using-dplyr.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>select()</code> picks variables based on their names or types. For example -</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-manipulation-using-dplyr.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using specific variable names -</span></span>
<span id="cb8-2"><a href="data-manipulation-using-dplyr.html#cb8-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length, Sepal.Width) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width
## 1          5.1         3.5
## 2          4.9         3.0
## 3          4.7         3.2
## 4          4.6         3.1
## 5          5.0         3.6
## 6          5.4         3.9</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-manipulation-using-dplyr.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using type -</span></span>
<span id="cb10-2"><a href="data-manipulation-using-dplyr.html#cb10-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(is.numeric) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## Warning: Use of bare predicate functions was deprecated in tidyselect 1.1.0.
## ℹ Please use wrap predicates in `where()` instead.
##   # Was:
##   data %&gt;% select(is.numeric)
## 
##   # Now:
##   data %&gt;% select(where(is.numeric))
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          5.1         3.5          1.4         0.2
## 2          4.9         3.0          1.4         0.2
## 3          4.7         3.2          1.3         0.2
## 4          4.6         3.1          1.5         0.2
## 5          5.0         3.6          1.4         0.2
## 6          5.4         3.9          1.7         0.4</code></pre>
<p>With the verb <code>select()</code>, comes some <em>selection helpers</em> -</p>
<p>If you want to select all the variables, you can use <code>everything()</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-manipulation-using-dplyr.html#cb13-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">everything</span>())</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## 4            4.6         3.1          1.5         0.2     setosa
## 5            5.0         3.6          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 7            4.6         3.4          1.4         0.3     setosa
## 8            5.0         3.4          1.5         0.2     setosa
## 9            4.4         2.9          1.4         0.2     setosa
## 10           4.9         3.1          1.5         0.1     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 13           4.8         3.0          1.4         0.1     setosa
## 14           4.3         3.0          1.1         0.1     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 23           4.6         3.6          1.0         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 35           4.9         3.1          1.5         0.2     setosa
## 36           5.0         3.2          1.2         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 38           4.9         3.6          1.4         0.1     setosa
## 39           4.4         3.0          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 41           5.0         3.5          1.3         0.3     setosa
## 42           4.5         2.3          1.3         0.3     setosa
## 43           4.4         3.2          1.3         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 46           4.8         3.0          1.4         0.3     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 48           4.6         3.2          1.4         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 50           5.0         3.3          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0         2.3          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7         2.8          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4         3.1          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9         3.1          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica</code></pre>
<p>You can choose the last column using <code>last_col()</code> or only columns that are grouped using <code>group_cols()</code> (You will understand better when I discuss the <code>group_by()</code> verb later).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-manipulation-using-dplyr.html#cb15-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">last_col</span>()) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Species
## 1  setosa
## 2  setosa
## 3  setosa
## 4  setosa
## 5  setosa
## 6  setosa</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-manipulation-using-dplyr.html#cb17-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Sepal.Length,Sepal.Width) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">group_cols</span>()) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
## # Groups:   Sepal.Length, Sepal.Width [6]
##   Sepal.Length Sepal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;
## 1          5.1         3.5
## 2          4.9         3  
## 3          4.7         3.2
## 4          4.6         3.1
## 5          5           3.6
## 6          5.4         3.9</code></pre>
<p>If there’s a common prefix or suffix to some column names, you can utilise that by using selectio helpers <code>starts_with()</code> or <code>ends_with()</code>, respectively -</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-manipulation-using-dplyr.html#cb19-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;Sepal&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width
## 1          5.1         3.5
## 2          4.9         3.0
## 3          4.7         3.2
## 4          4.6         3.1
## 5          5.0         3.6
## 6          5.4         3.9</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-manipulation-using-dplyr.html#cb21-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;Length&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Petal.Length
## 1          5.1          1.4
## 2          4.9          1.4
## 3          4.7          1.3
## 4          4.6          1.5
## 5          5.0          1.4
## 6          5.4          1.7</code></pre>
<p>Even, an internal pattern can be used to select a column by using <code>contains()</code> -</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-manipulation-using-dplyr.html#cb23-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;dth&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Width Petal.Width
## 1         3.5         0.2
## 2         3.0         0.2
## 3         3.2         0.2
## 4         3.1         0.2
## 5         3.6         0.2
## 6         3.9         0.4</code></pre>
<p>Even, you can use regular expression to select a column by using <code>matches()</code> -</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-manipulation-using-dplyr.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># column name containing either W or d or both</span></span>
<span id="cb25-2"><a href="data-manipulation-using-dplyr.html#cb25-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;[Wd]&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Width Petal.Width
## 1         3.5         0.2
## 2         3.0         0.2
## 3         3.2         0.2
## 4         3.1         0.2
## 5         3.6         0.2
## 6         3.9         0.4</code></pre>
</div>
<div id="filter" class="section level3 hasAnchor" number="0.3.2">
<h3><span class="header-section-number">0.3.2</span> filter()<a href="data-manipulation-using-dplyr.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>filter()</code> verb is used to subset a data frame based on one or more conditions. Only the rows that satisfy the condition(s) remain and others filter out. There are some functions and operators that you should know while dealing with <code>filter()</code> verb -</p>
<p><code>==</code>, <code>&gt;</code> or <code>&lt;</code>, <code>&gt;=</code> or <code>&lt;=</code>
<code>&amp;</code>, <code>|</code>, <code>!</code>
<code>is.na()</code>
<code>%in%</code></p>
<p>Let’s see some examples -</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-manipulation-using-dplyr.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># choose the rows whose Petal.Width is greater than 0.2</span></span>
<span id="cb27-2"><a href="data-manipulation-using-dplyr.html#cb27-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Petal.Width <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 1          6.3         3.3          6.0         2.5 virginica
## 2          7.1         3.0          5.9         2.1 virginica
## 3          6.5         3.0          5.8         2.2 virginica
## 4          7.6         3.0          6.6         2.1 virginica
## 5          7.2         3.6          6.1         2.5 virginica
## 6          6.8         3.0          5.5         2.1 virginica</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-manipulation-using-dplyr.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># choose the rows for setosa Species</span></span>
<span id="cb29-2"><a href="data-manipulation-using-dplyr.html#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="data-manipulation-using-dplyr.html#cb29-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-manipulation-using-dplyr.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#or </span></span>
<span id="cb31-2"><a href="data-manipulation-using-dplyr.html#cb31-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Species <span class="sc">%in%</span> <span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-manipulation-using-dplyr.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or even the opposite is True</span></span>
<span id="cb33-2"><a href="data-manipulation-using-dplyr.html#cb33-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Species <span class="sc">!=</span> <span class="st">&quot;setosa&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1          7.0         3.2          4.7         1.4 versicolor
## 2          6.4         3.2          4.5         1.5 versicolor
## 3          6.9         3.1          4.9         1.5 versicolor
## 4          5.5         2.3          4.0         1.3 versicolor
## 5          6.5         2.8          4.6         1.5 versicolor
## 6          5.7         2.8          4.5         1.3 versicolor</code></pre>
</div>
<div id="mutate" class="section level3 hasAnchor" number="0.3.3">
<h3><span class="header-section-number">0.3.3</span> mutate()<a href="data-manipulation-using-dplyr.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The verb <code>mutate()</code> creates new columns and often the element of the new col can be functions of the existing variables (i.e. columns).</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-manipulation-using-dplyr.html#cb35-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Length_difference =</span> Sepal.Length <span class="sc">-</span> Petal.Length) <span class="co"># not that the new column here make much sense</span></span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## 4            4.6         3.1          1.5         0.2     setosa
## 5            5.0         3.6          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 7            4.6         3.4          1.4         0.3     setosa
## 8            5.0         3.4          1.5         0.2     setosa
## 9            4.4         2.9          1.4         0.2     setosa
## 10           4.9         3.1          1.5         0.1     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 13           4.8         3.0          1.4         0.1     setosa
## 14           4.3         3.0          1.1         0.1     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 23           4.6         3.6          1.0         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 35           4.9         3.1          1.5         0.2     setosa
## 36           5.0         3.2          1.2         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 38           4.9         3.6          1.4         0.1     setosa
## 39           4.4         3.0          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 41           5.0         3.5          1.3         0.3     setosa
## 42           4.5         2.3          1.3         0.3     setosa
## 43           4.4         3.2          1.3         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 46           4.8         3.0          1.4         0.3     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 48           4.6         3.2          1.4         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 50           5.0         3.3          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0         2.3          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7         2.8          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4         3.1          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9         3.1          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica
##     Length_difference
## 1                 3.7
## 2                 3.5
## 3                 3.4
## 4                 3.1
## 5                 3.6
## 6                 3.7
## 7                 3.2
## 8                 3.5
## 9                 3.0
## 10                3.4
## 11                3.9
## 12                3.2
## 13                3.4
## 14                3.2
## 15                4.6
## 16                4.2
## 17                4.1
## 18                3.7
## 19                4.0
## 20                3.6
## 21                3.7
## 22                3.6
## 23                3.6
## 24                3.4
## 25                2.9
## 26                3.4
## 27                3.4
## 28                3.7
## 29                3.8
## 30                3.1
## 31                3.2
## 32                3.9
## 33                3.7
## 34                4.1
## 35                3.4
## 36                3.8
## 37                4.2
## 38                3.5
## 39                3.1
## 40                3.6
## 41                3.7
## 42                3.2
## 43                3.1
## 44                3.4
## 45                3.2
## 46                3.4
## 47                3.5
## 48                3.2
## 49                3.8
## 50                3.6
## 51                2.3
## 52                1.9
## 53                2.0
## 54                1.5
## 55                1.9
## 56                1.2
## 57                1.6
## 58                1.6
## 59                2.0
## 60                1.3
## 61                1.5
## 62                1.7
## 63                2.0
## 64                1.4
## 65                2.0
## 66                2.3
## 67                1.1
## 68                1.7
## 69                1.7
## 70                1.7
## 71                1.1
## 72                2.1
## 73                1.4
## 74                1.4
## 75                2.1
## 76                2.2
## 77                2.0
## 78                1.7
## 79                1.5
## 80                2.2
## 81                1.7
## 82                1.8
## 83                1.9
## 84                0.9
## 85                0.9
## 86                1.5
## 87                2.0
## 88                1.9
## 89                1.5
## 90                1.5
## 91                1.1
## 92                1.5
## 93                1.8
## 94                1.7
## 95                1.4
## 96                1.5
## 97                1.5
## 98                1.9
## 99                2.1
## 100               1.6
## 101               0.3
## 102               0.7
## 103               1.2
## 104               0.7
## 105               0.7
## 106               1.0
## 107               0.4
## 108               1.0
## 109               0.9
## 110               1.1
## 111               1.4
## 112               1.1
## 113               1.3
## 114               0.7
## 115               0.7
## 116               1.1
## 117               1.0
## 118               1.0
## 119               0.8
## 120               1.0
## 121               1.2
## 122               0.7
## 123               1.0
## 124               1.4
## 125               1.0
## 126               1.2
## 127               1.4
## 128               1.2
## 129               0.8
## 130               1.4
## 131               1.3
## 132               1.5
## 133               0.8
## 134               1.2
## 135               0.5
## 136               1.6
## 137               0.7
## 138               0.9
## 139               1.2
## 140               1.5
## 141               1.1
## 142               1.8
## 143               0.7
## 144               0.9
## 145               1.0
## 146               1.5
## 147               1.3
## 148               1.3
## 149               0.8
## 150               0.8</code></pre>
<p>Interestingly, setting the value of an existing column to <code>NULL</code> inside mutate deletes the column.</p>
</div>
<div id="rename" class="section level3 hasAnchor" number="0.3.4">
<h3><span class="header-section-number">0.3.4</span> rename()<a href="data-manipulation-using-dplyr.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As the name suggests, <code>rename()</code> verb changes the name of an existing column. The syntax is <code>&lt;new_name&gt; = &lt;old_name&gt;</code>. Example -</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-manipulation-using-dplyr.html#cb37-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Species.name=</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species.name
## 1          5.1         3.5          1.4         0.2       setosa
## 2          4.9         3.0          1.4         0.2       setosa
## 3          4.7         3.2          1.3         0.2       setosa
## 4          4.6         3.1          1.5         0.2       setosa
## 5          5.0         3.6          1.4         0.2       setosa
## 6          5.4         3.9          1.7         0.4       setosa</code></pre>
<p>Interestingly, you can change the name of a column while selecting using <code>select()</code> verb -</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-manipulation-using-dplyr.html#cb39-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length, </span>
<span id="cb39-2"><a href="data-manipulation-using-dplyr.html#cb39-2" aria-hidden="true" tabindex="-1"></a>                Sepal.Width, </span>
<span id="cb39-3"><a href="data-manipulation-using-dplyr.html#cb39-3" aria-hidden="true" tabindex="-1"></a>                Petal.Length, </span>
<span id="cb39-4"><a href="data-manipulation-using-dplyr.html#cb39-4" aria-hidden="true" tabindex="-1"></a>                Petal.Width, </span>
<span id="cb39-5"><a href="data-manipulation-using-dplyr.html#cb39-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">Species.name=</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species.name
## 1          5.1         3.5          1.4         0.2       setosa
## 2          4.9         3.0          1.4         0.2       setosa
## 3          4.7         3.2          1.3         0.2       setosa
## 4          4.6         3.1          1.5         0.2       setosa
## 5          5.0         3.6          1.4         0.2       setosa
## 6          5.4         3.9          1.7         0.4       setosa</code></pre>
</div>
<div id="arrange" class="section level3 hasAnchor" number="0.3.5">
<h3><span class="header-section-number">0.3.5</span> arrange()<a href="data-manipulation-using-dplyr.html#arrange" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The verb <code>arrange()</code> arranges or orders the rows of a data frame by the values of selected column(s), like -</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-manipulation-using-dplyr.html#cb41-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          4.3         3.0          1.1         0.1  setosa
## 2          4.4         2.9          1.4         0.2  setosa
## 3          4.4         3.0          1.3         0.2  setosa
## 4          4.4         3.2          1.3         0.2  setosa
## 5          4.5         2.3          1.3         0.3  setosa
## 6          4.6         3.1          1.5         0.2  setosa</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-manipulation-using-dplyr.html#cb43-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Sepal.Length,Sepal.Width) <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="co"># After arranging the data frame by Sepal.Length, for a distinct Sepal.Length, the Sepal.Width is arrange and so as the rest of the data frame with it.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          4.3         3.0          1.1         0.1  setosa
## 2          4.4         2.9          1.4         0.2  setosa
## 3          4.4         3.0          1.3         0.2  setosa
## 4          4.4         3.2          1.3         0.2  setosa
## 5          4.5         2.3          1.3         0.3  setosa
## 6          4.6         3.1          1.5         0.2  setosa</code></pre>
</div>
<div id="distinct" class="section level3 hasAnchor" number="0.3.6">
<h3><span class="header-section-number">0.3.6</span> distinct()<a href="data-manipulation-using-dplyr.html#distinct" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>distinct()</code> verb retains only the unique/distinct rows from a data frame given the column(s) selected and only output the select column(s), if not the <code>.keep_all</code> parameter is change from it’s default value <code>FALSE</code> to <code>TRUE</code>. Let’s see some examples -</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-manipulation-using-dplyr.html#cb45-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length
## 1          5.1
## 2          4.9
## 3          4.7
## 4          4.6
## 5          5.0
## 6          5.4</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-manipulation-using-dplyr.html#cb47-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(Sepal.Length,Sepal.Width) <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="co"># here only the unique combinations of Sepal.Length and Sepal.Width are kept.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width
## 1          5.1         3.5
## 2          4.9         3.0
## 3          4.7         3.2
## 4          4.6         3.1
## 5          5.0         3.6
## 6          5.4         3.9</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-manipulation-using-dplyr.html#cb49-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(Sepal.Length,Sepal.Width, <span class="at">.keep_all =</span> T) <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="co"># rest of the columns are also returned.</span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div id="slice" class="section level3 hasAnchor" number="0.3.7">
<h3><span class="header-section-number">0.3.7</span> slice()<a href="data-manipulation-using-dplyr.html#slice" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>the <code>slice()</code> verb lets you index rows by their (integer) locations. It has some helpers too -</p>
<p><code>slice_head()</code> selects the first row, while <code>slice_tail()</code> selects the last. Same can be done using <code>slice(1)</code> and <code>slice(n())</code></p>
<p><code>slice_head(&lt;int&gt;)</code> selects from the first to the <code>&lt;int&gt;th</code> row, while <code>slice_tail(&lt;int&gt;)</code> selects from <code>&lt;int&gt;th</code> to the last row up to the end row.</p>
<p><code>slice_sample()</code> selects rows at random</p>
<p><code>slice_min()</code> and <code>slice_max()</code> helper selects rows with the lowest and the highest value of the selected variable. Few examples -</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-manipulation-using-dplyr.html#cb51-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-manipulation-using-dplyr.html#cb53-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">10</span><span class="sc">:</span><span class="fu">n</span>()) <span class="co"># you can do that too. </span></span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            4.9         3.1          1.5         0.1     setosa
## 2            5.4         3.7          1.5         0.2     setosa
## 3            4.8         3.4          1.6         0.2     setosa
## 4            4.8         3.0          1.4         0.1     setosa
## 5            4.3         3.0          1.1         0.1     setosa
## 6            5.8         4.0          1.2         0.2     setosa
## 7            5.7         4.4          1.5         0.4     setosa
## 8            5.4         3.9          1.3         0.4     setosa
## 9            5.1         3.5          1.4         0.3     setosa
## 10           5.7         3.8          1.7         0.3     setosa
## 11           5.1         3.8          1.5         0.3     setosa
## 12           5.4         3.4          1.7         0.2     setosa
## 13           5.1         3.7          1.5         0.4     setosa
## 14           4.6         3.6          1.0         0.2     setosa
## 15           5.1         3.3          1.7         0.5     setosa
## 16           4.8         3.4          1.9         0.2     setosa
## 17           5.0         3.0          1.6         0.2     setosa
## 18           5.0         3.4          1.6         0.4     setosa
## 19           5.2         3.5          1.5         0.2     setosa
## 20           5.2         3.4          1.4         0.2     setosa
## 21           4.7         3.2          1.6         0.2     setosa
## 22           4.8         3.1          1.6         0.2     setosa
## 23           5.4         3.4          1.5         0.4     setosa
## 24           5.2         4.1          1.5         0.1     setosa
## 25           5.5         4.2          1.4         0.2     setosa
## 26           4.9         3.1          1.5         0.2     setosa
## 27           5.0         3.2          1.2         0.2     setosa
## 28           5.5         3.5          1.3         0.2     setosa
## 29           4.9         3.6          1.4         0.1     setosa
## 30           4.4         3.0          1.3         0.2     setosa
## 31           5.1         3.4          1.5         0.2     setosa
## 32           5.0         3.5          1.3         0.3     setosa
## 33           4.5         2.3          1.3         0.3     setosa
## 34           4.4         3.2          1.3         0.2     setosa
## 35           5.0         3.5          1.6         0.6     setosa
## 36           5.1         3.8          1.9         0.4     setosa
## 37           4.8         3.0          1.4         0.3     setosa
## 38           5.1         3.8          1.6         0.2     setosa
## 39           4.6         3.2          1.4         0.2     setosa
## 40           5.3         3.7          1.5         0.2     setosa
## 41           5.0         3.3          1.4         0.2     setosa
## 42           7.0         3.2          4.7         1.4 versicolor
## 43           6.4         3.2          4.5         1.5 versicolor
## 44           6.9         3.1          4.9         1.5 versicolor
## 45           5.5         2.3          4.0         1.3 versicolor
## 46           6.5         2.8          4.6         1.5 versicolor
## 47           5.7         2.8          4.5         1.3 versicolor
## 48           6.3         3.3          4.7         1.6 versicolor
## 49           4.9         2.4          3.3         1.0 versicolor
## 50           6.6         2.9          4.6         1.3 versicolor
## 51           5.2         2.7          3.9         1.4 versicolor
## 52           5.0         2.0          3.5         1.0 versicolor
## 53           5.9         3.0          4.2         1.5 versicolor
## 54           6.0         2.2          4.0         1.0 versicolor
## 55           6.1         2.9          4.7         1.4 versicolor
## 56           5.6         2.9          3.6         1.3 versicolor
## 57           6.7         3.1          4.4         1.4 versicolor
## 58           5.6         3.0          4.5         1.5 versicolor
## 59           5.8         2.7          4.1         1.0 versicolor
## 60           6.2         2.2          4.5         1.5 versicolor
## 61           5.6         2.5          3.9         1.1 versicolor
## 62           5.9         3.2          4.8         1.8 versicolor
## 63           6.1         2.8          4.0         1.3 versicolor
## 64           6.3         2.5          4.9         1.5 versicolor
## 65           6.1         2.8          4.7         1.2 versicolor
## 66           6.4         2.9          4.3         1.3 versicolor
## 67           6.6         3.0          4.4         1.4 versicolor
## 68           6.8         2.8          4.8         1.4 versicolor
## 69           6.7         3.0          5.0         1.7 versicolor
## 70           6.0         2.9          4.5         1.5 versicolor
## 71           5.7         2.6          3.5         1.0 versicolor
## 72           5.5         2.4          3.8         1.1 versicolor
## 73           5.5         2.4          3.7         1.0 versicolor
## 74           5.8         2.7          3.9         1.2 versicolor
## 75           6.0         2.7          5.1         1.6 versicolor
## 76           5.4         3.0          4.5         1.5 versicolor
## 77           6.0         3.4          4.5         1.6 versicolor
## 78           6.7         3.1          4.7         1.5 versicolor
## 79           6.3         2.3          4.4         1.3 versicolor
## 80           5.6         3.0          4.1         1.3 versicolor
## 81           5.5         2.5          4.0         1.3 versicolor
## 82           5.5         2.6          4.4         1.2 versicolor
## 83           6.1         3.0          4.6         1.4 versicolor
## 84           5.8         2.6          4.0         1.2 versicolor
## 85           5.0         2.3          3.3         1.0 versicolor
## 86           5.6         2.7          4.2         1.3 versicolor
## 87           5.7         3.0          4.2         1.2 versicolor
## 88           5.7         2.9          4.2         1.3 versicolor
## 89           6.2         2.9          4.3         1.3 versicolor
## 90           5.1         2.5          3.0         1.1 versicolor
## 91           5.7         2.8          4.1         1.3 versicolor
## 92           6.3         3.3          6.0         2.5  virginica
## 93           5.8         2.7          5.1         1.9  virginica
## 94           7.1         3.0          5.9         2.1  virginica
## 95           6.3         2.9          5.6         1.8  virginica
## 96           6.5         3.0          5.8         2.2  virginica
## 97           7.6         3.0          6.6         2.1  virginica
## 98           4.9         2.5          4.5         1.7  virginica
## 99           7.3         2.9          6.3         1.8  virginica
## 100          6.7         2.5          5.8         1.8  virginica
## 101          7.2         3.6          6.1         2.5  virginica
## 102          6.5         3.2          5.1         2.0  virginica
## 103          6.4         2.7          5.3         1.9  virginica
## 104          6.8         3.0          5.5         2.1  virginica
## 105          5.7         2.5          5.0         2.0  virginica
## 106          5.8         2.8          5.1         2.4  virginica
## 107          6.4         3.2          5.3         2.3  virginica
## 108          6.5         3.0          5.5         1.8  virginica
## 109          7.7         3.8          6.7         2.2  virginica
## 110          7.7         2.6          6.9         2.3  virginica
## 111          6.0         2.2          5.0         1.5  virginica
## 112          6.9         3.2          5.7         2.3  virginica
## 113          5.6         2.8          4.9         2.0  virginica
## 114          7.7         2.8          6.7         2.0  virginica
## 115          6.3         2.7          4.9         1.8  virginica
## 116          6.7         3.3          5.7         2.1  virginica
## 117          7.2         3.2          6.0         1.8  virginica
## 118          6.2         2.8          4.8         1.8  virginica
## 119          6.1         3.0          4.9         1.8  virginica
## 120          6.4         2.8          5.6         2.1  virginica
## 121          7.2         3.0          5.8         1.6  virginica
## 122          7.4         2.8          6.1         1.9  virginica
## 123          7.9         3.8          6.4         2.0  virginica
## 124          6.4         2.8          5.6         2.2  virginica
## 125          6.3         2.8          5.1         1.5  virginica
## 126          6.1         2.6          5.6         1.4  virginica
## 127          7.7         3.0          6.1         2.3  virginica
## 128          6.3         3.4          5.6         2.4  virginica
## 129          6.4         3.1          5.5         1.8  virginica
## 130          6.0         3.0          4.8         1.8  virginica
## 131          6.9         3.1          5.4         2.1  virginica
## 132          6.7         3.1          5.6         2.4  virginica
## 133          6.9         3.1          5.1         2.3  virginica
## 134          5.8         2.7          5.1         1.9  virginica
## 135          6.8         3.2          5.9         2.3  virginica
## 136          6.7         3.3          5.7         2.5  virginica
## 137          6.7         3.0          5.2         2.3  virginica
## 138          6.3         2.5          5.0         1.9  virginica
## 139          6.5         3.0          5.2         2.0  virginica
## 140          6.2         3.4          5.4         2.3  virginica
## 141          5.9         3.0          5.1         1.8  virginica</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-manipulation-using-dplyr.html#cb55-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>( Sepal.Length)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          4.3           3          1.1         0.1  setosa</code></pre>
</div>
<div id="join" class="section level3 hasAnchor" number="0.3.8">
<h3><span class="header-section-number">0.3.8</span> join<a href="data-manipulation-using-dplyr.html#join" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A disclaimer, there’s no verb called <code>join()</code> in dplyr (at least, to date). However, there are two types of join verbs - <code>inner_join()</code> and <code>outer_join</code> (which is also not a verb, but a class of three verbs: <code>left_join()</code>, <code>right_join()</code> and <code>full_join()</code>). join verbs joins columns from two data frames based on a common key column.</p>
<p><code>inner_join()</code> verb joins two data frame and retains the rows where the keys match. This means that there is a potential loss of observations that we may not appreciate in the real-life analysis.</p>
<p>On the other hand, if we have two data frames <code>x</code> and <code>y</code>, the <code>left_join()</code> verb matches the keys from <code>x</code> and <code>y</code>, while keeps all the rows from <code>x</code> and joins the matched rows from <code>y</code>. The empty cells are filled with NA values. For <code>right_join()</code> verb, is the opposite scenario. On the other hand, the <code>full_join()</code> verb retains all the rows from both data frames and empty cells are filled with NA values. Let’s clear the concept with some examples -</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-manipulation-using-dplyr.html#cb57-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length,Sepal.Width,Species) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb57-2"><a href="data-manipulation-using-dplyr.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="data-manipulation-using-dplyr.html#cb57-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Petal.Length,Petal.Width,Species) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;versicolor&quot;</span>, <span class="st">&quot;virginica&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb57-4"><a href="data-manipulation-using-dplyr.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="data-manipulation-using-dplyr.html#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="data-manipulation-using-dplyr.html#cb57-6" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(y, <span class="at">by =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in inner_join(., y, by = &quot;Species&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 2 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   &quot;many-to-many&quot;` to silence this warning.</code></pre>
<pre><code>##    Sepal.Length Sepal.Width    Species Petal.Length Petal.Width
## 1           5.6         2.7 versicolor          4.7         1.4
## 2           5.6         2.7 versicolor          4.4         1.4
## 3           5.6         2.7 versicolor          3.8         1.1
## 4           5.6         2.7 versicolor          3.0         1.1
## 5           5.6         2.7 versicolor          3.9         1.4
## 6           6.0         2.2 versicolor          4.7         1.4
## 7           6.0         2.2 versicolor          4.4         1.4
## 8           6.0         2.2 versicolor          3.8         1.1
## 9           6.0         2.2 versicolor          3.0         1.1
## 10          6.0         2.2 versicolor          3.9         1.4
## 11          6.3         3.3 versicolor          4.7         1.4
## 12          6.3         3.3 versicolor          4.4         1.4
## 13          6.3         3.3 versicolor          3.8         1.1
## 14          6.3         3.3 versicolor          3.0         1.1
## 15          6.3         3.3 versicolor          3.9         1.4</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-manipulation-using-dplyr.html#cb60-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(y, <span class="at">by =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in left_join(., y, by = &quot;Species&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 2 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   &quot;many-to-many&quot;` to silence this warning.</code></pre>
<pre><code>##    Sepal.Length Sepal.Width    Species Petal.Length Petal.Width
## 1           4.9         3.1     setosa           NA          NA
## 2           5.6         2.7 versicolor          4.7         1.4
## 3           5.6         2.7 versicolor          4.4         1.4
## 4           5.6         2.7 versicolor          3.8         1.1
## 5           5.6         2.7 versicolor          3.0         1.1
## 6           5.6         2.7 versicolor          3.9         1.4
## 7           4.3         3.0     setosa           NA          NA
## 8           5.0         3.4     setosa           NA          NA
## 9           5.0         3.5     setosa           NA          NA
## 10          6.0         2.2 versicolor          4.7         1.4
## 11          6.0         2.2 versicolor          4.4         1.4
## 12          6.0         2.2 versicolor          3.8         1.1
## 13          6.0         2.2 versicolor          3.0         1.1
## 14          6.0         2.2 versicolor          3.9         1.4
## 15          5.1         3.5     setosa           NA          NA
## 16          5.2         3.5     setosa           NA          NA
## 17          6.3         3.3 versicolor          4.7         1.4
## 18          6.3         3.3 versicolor          4.4         1.4
## 19          6.3         3.3 versicolor          3.8         1.1
## 20          6.3         3.3 versicolor          3.0         1.1
## 21          6.3         3.3 versicolor          3.9         1.4
## 22          5.5         4.2     setosa           NA          NA</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-manipulation-using-dplyr.html#cb63-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(y, <span class="at">by =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in right_join(., y, by = &quot;Species&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 2 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   &quot;many-to-many&quot;` to silence this warning.</code></pre>
<pre><code>##    Sepal.Length Sepal.Width    Species Petal.Length Petal.Width
## 1           5.6         2.7 versicolor          4.7         1.4
## 2           5.6         2.7 versicolor          4.4         1.4
## 3           5.6         2.7 versicolor          3.8         1.1
## 4           5.6         2.7 versicolor          3.0         1.1
## 5           5.6         2.7 versicolor          3.9         1.4
## 6           6.0         2.2 versicolor          4.7         1.4
## 7           6.0         2.2 versicolor          4.4         1.4
## 8           6.0         2.2 versicolor          3.8         1.1
## 9           6.0         2.2 versicolor          3.0         1.1
## 10          6.0         2.2 versicolor          3.9         1.4
## 11          6.3         3.3 versicolor          4.7         1.4
## 12          6.3         3.3 versicolor          4.4         1.4
## 13          6.3         3.3 versicolor          3.8         1.1
## 14          6.3         3.3 versicolor          3.0         1.1
## 15          6.3         3.3 versicolor          3.9         1.4
## 16           NA          NA  virginica          5.0         1.9
## 17           NA          NA  virginica          5.1         1.9
## 18           NA          NA  virginica          6.0         2.5
## 19           NA          NA  virginica          5.3         2.3
## 20           NA          NA  virginica          6.7         2.0</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-manipulation-using-dplyr.html#cb66-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(y, <span class="at">by =</span> <span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in full_join(., y, by = &quot;Species&quot;): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 2 of `x` matches multiple rows in `y`.
## ℹ Row 1 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   &quot;many-to-many&quot;` to silence this warning.</code></pre>
<pre><code>##    Sepal.Length Sepal.Width    Species Petal.Length Petal.Width
## 1           4.9         3.1     setosa           NA          NA
## 2           5.6         2.7 versicolor          4.7         1.4
## 3           5.6         2.7 versicolor          4.4         1.4
## 4           5.6         2.7 versicolor          3.8         1.1
## 5           5.6         2.7 versicolor          3.0         1.1
## 6           5.6         2.7 versicolor          3.9         1.4
## 7           4.3         3.0     setosa           NA          NA
## 8           5.0         3.4     setosa           NA          NA
## 9           5.0         3.5     setosa           NA          NA
## 10          6.0         2.2 versicolor          4.7         1.4
## 11          6.0         2.2 versicolor          4.4         1.4
## 12          6.0         2.2 versicolor          3.8         1.1
## 13          6.0         2.2 versicolor          3.0         1.1
## 14          6.0         2.2 versicolor          3.9         1.4
## 15          5.1         3.5     setosa           NA          NA
## 16          5.2         3.5     setosa           NA          NA
## 17          6.3         3.3 versicolor          4.7         1.4
## 18          6.3         3.3 versicolor          4.4         1.4
## 19          6.3         3.3 versicolor          3.8         1.1
## 20          6.3         3.3 versicolor          3.0         1.1
## 21          6.3         3.3 versicolor          3.9         1.4
## 22          5.5         4.2     setosa           NA          NA
## 23           NA          NA  virginica          5.0         1.9
## 24           NA          NA  virginica          5.1         1.9
## 25           NA          NA  virginica          6.0         2.5
## 26           NA          NA  virginica          5.3         2.3
## 27           NA          NA  virginica          6.7         2.0</code></pre>
</div>
<div id="group_by-and-summarise" class="section level3 hasAnchor" number="0.3.9">
<h3><span class="header-section-number">0.3.9</span> group_by() and summarise()<a href="data-manipulation-using-dplyr.html#group_by-and-summarise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I will be describing <code>group_by()</code> and <code>summarise()</code> verbs together to show the effect of the former. <code>group_by()</code> is the most importsnt grouping verb in dplyr. It takes one or more variables of the data frame to group by -</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-manipulation-using-dplyr.html#cb69-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
## # Groups:   Species [1]
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
## 1          5.1         3.5          1.4         0.2 setosa 
## 2          4.9         3            1.4         0.2 setosa 
## 3          4.7         3.2          1.3         0.2 setosa 
## 4          4.6         3.1          1.5         0.2 setosa 
## 5          5           3.6          1.4         0.2 setosa 
## 6          5.4         3.9          1.7         0.4 setosa</code></pre>
<p>Rather than some metadata, you don’t see any change in the structure of the iris data frame yet. Let’s select Sepal.Length and see the effect -</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-manipulation-using-dplyr.html#cb71-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## Adding missing grouping variables: `Species`</code></pre>
<pre><code>## # A tibble: 6 × 2
## # Groups:   Species [1]
##   Species Sepal.Length
##   &lt;fct&gt;          &lt;dbl&gt;
## 1 setosa           5.1
## 2 setosa           4.9
## 3 setosa           4.7
## 4 setosa           4.6
## 5 setosa           5  
## 6 setosa           5.4</code></pre>
<p>Though I selected only the <code>Sepal.Length</code>, the Species column also appears. Yes, that’s because of the application <code>group_by()</code> verb beforehand. But the most dramatic effect can be seen in conjunction with the <code>summarise()</code> verb.</p>
<p><code>summarise()</code> generates a new data frame and returns one row (with the result of course) for each combination of grouping variables. In the case of no grouping variables, the output has a single row summarising all observations in the input. Now, let’s see the effect of <code>group_by()</code> in conjunction with <code>summarise()</code> verb -</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-manipulation-using-dplyr.html#cb74-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">count=</span><span class="fu">n</span>())</span></code></pre></div>
<pre><code>## Adding missing grouping variables: `Species`</code></pre>
<pre><code>## # A tibble: 3 × 2
##   Species    count
##   &lt;fct&gt;      &lt;int&gt;
## 1 setosa        50
## 2 versicolor    50
## 3 virginica     50</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-manipulation-using-dplyr.html#cb77-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean_Sepal_length=</span><span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>## Adding missing grouping variables: `Species`</code></pre>
<pre><code>## # A tibble: 3 × 2
##   Species    mean_Sepal_length
##   &lt;fct&gt;                  &lt;dbl&gt;
## 1 setosa                  5.01
## 2 versicolor              5.94
## 3 virginica               6.59</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-manipulation-using-dplyr.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># as being told, without any grouping -</span></span>
<span id="cb80-2"><a href="data-manipulation-using-dplyr.html#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="data-manipulation-using-dplyr.html#cb80-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean_Sepal_length=</span><span class="fu">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>##   mean_Sepal_length
## 1          5.843333</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="preface.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plotting-using-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/AMMHasan/Exploratory_data_analysis_for_cancer_biologists/edit/master/03-data_manipulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/AMMHasan/Exploratory_data_analysis_for_cancer_biologists/blob/master/03-data_manipulation.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
